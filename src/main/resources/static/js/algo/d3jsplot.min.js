function plotGraph(c){var s={};var w=window.innerWidth-40;var e=window.innerHeight-40;var y=6;var t=0;var h={};var z=0.1;var n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);c.forEach(function(A){A.source=s[A.source]||(s[A.source]={name:A.source});A.target=s[A.target]||(s[A.target]={name:A.target})});var s=Object.keys(s).map(function(A){return s[A]});var b=d3.zoom().scaleExtent([0.2,10]).on("zoom",o);var p=d3.select("#causal-graph").append("svg").attr("width",w).attr("height",e).call(b).on("dblclick.zoom",null);var a=p.append("g");var j=d3.forceSimulation(s).force("link",d3.forceLink().id(function(A){return A.index})).force("charge",d3.forceManyBody()).force("collide",d3.forceCollide(2)).force("center",d3.forceCenter(w/2,e/2)).on("tick",g);j.force("link").links(c);j.force("link").distance(50);for(i=0;i<s.length;i++){h[i+","+i]=1}c.forEach(function(A){h[A.source.index+","+A.target.index]=1});a.append("defs").append("marker").attr("id","marker-start-arrow").attr("viewBox","0 -5 10 10").attr("refX",-10).attr("refY",0).attr("markerWidth",y).attr("markerHeight",y).attr("orient","auto").append("path").attr("d","M10,-5L0,0L10,5").attr("class","marker-start-arrow");a.append("defs").append("marker").attr("id","marker-start-circle").attr("viewBox","0 -5 10 10").attr("refX",-8).attr("refY",0).attr("markerWidth",y).attr("markerHeight",y).attr("orient","auto").append("circle").attr("cx",6).attr("cy",0).attr("r",4).attr("class","marker-start-circle");a.append("defs").append("marker").attr("id","marker-end-arrow").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",y).attr("markerHeight",y).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","marker-end-arrow");a.append("defs").append("marker").attr("id","marker-end-circle").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",0).attr("markerWidth",y).attr("markerHeight",y).attr("orient","auto").append("circle").attr("cx",6).attr("cy",0).attr("r",4).attr("class","marker-end-circle");var k=a.append("g").selectAll(".link").data(c).enter().append("path").attr("class","link").attr("marker-start",function(A){if(A.type==="<->"){return"url(#marker-start-arrow)"}else{if(A.type==="o-o"||A.type==="o->"){return"url(#marker-start-circle)"}else{return""}}}).attr("marker-end",function(A){if(A.type==="-->"||A.type==="<->"||A.type==="o->"){return"url(#marker-end-arrow)"}else{if(A.type==="o-o"){return"url(#marker-end-circle)"}else{return""}}}).style("stroke",function(A){if(A.edgeProps!==null&&A.edgeProps.indexOf("dd")>=0){return d3.rgb(0,128,0)}}).style("stroke-dasharray",function(A){if(A.edgeProps!==null&&A.edgeProps.indexOf("nl")>=0){return(6,3)}}).on("mouseover",function(A){if(A.bootstrap!==null){n.transition().duration(200).style("opacity",0.9);n.html(A.bootstrap).style("left",(d3.event.pageX)+"px").style("top",(d3.event.pageY-28)+"px")}}).on("mouseout",function(A){if(A.bootstrap!==null){n.transition().duration(500).style("opacity",0)}});var u=a.append("g").selectAll(".node").data(s).enter().append("circle").attr("class","node").attr("r",y).on("dblclick",v).call(d3.drag().on("start",q).on("drag",l).on("end",r));var m=a.append("g").selectAll(".node-name").data(s).enter().append("text").attr("class","node-name").attr("x",8).attr("y",".31em").text(function(A){return A.name});function g(){u.attr("cx",function(A){return A.x}).attr("cy",function(A){return A.y});k.attr("d",f).each(function(){this.parentNode.insertBefore(this,this)});m.attr("x",function(A){return A.x-(y/2)}).attr("y",function(A){return A.y-(1.5*y)})}function f(A){return"M"+A.source.x+","+A.source.y+"L"+A.target.x+","+A.target.y}function o(){a.attr("transform",d3.event.transform)}function x(B,A){return h[B.index+","+A.index]}function v(){if(t===0){d=d3.select(this).node().__data__;u.style("opacity",function(A){return x(d,A)|x(A,d)?1:z});m.style("opacity",function(A){return x(d,A)|x(A,d)?1:z});k.style("opacity",function(A){return d.index===A.source.index|d.index===A.target.index?1:z});t=1}else{u.style("opacity",1);m.style("opacity",1);k.style("opacity",1);t=0}}function q(){if(!d3.event.active){j.alphaTarget(0.3).restart()}d3.event.subject.fx=d3.event.subject.x;d3.event.subject.fy=d3.event.subject.y}function l(){d3.event.subject.fx=d3.event.x;d3.event.subject.fy=d3.event.y}function r(){if(!d3.event.active){j.alphaTarget(0)}d3.event.subject.fx=null;d3.event.subject.fy=null}$("#searchBtn").click(function(){var D=$("#search").val();var C=a.selectAll(".node");if(D===""){C.style("stroke","white").style("stroke-width","1")}else{var A=C.filter(function(F,E){return F.name.toLowerCase()!==D.toLowerCase()});A.style("opacity","0");var B=a.selectAll(".link");B.style("opacity","0");d3.selectAll(".node, .link").transition().duration(5000).style("opacity",1)}})};