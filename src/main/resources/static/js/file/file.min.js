function toHumanReadableSize(a){var c=1000;if(a<c){return a+" B"}var b=["kB","MB","GB","TB","PB","EB"];var d=Math.floor(Math.log(a)/Math.log(c));return Number(a/Math.pow(c,d)).toFixed(2)+" "+b[d-1]}var file_tbl=$("#file_tbl").DataTable({pageLength:10,responsive:true,sAjaxDataProp:"",aoColumns:[{mData:"name"},{mData:"size"},{mData:"creationTime"},{mData:function(a){return{id:a.id}}},{mData:function(a){return{id:a.id,categorize:a.categorized}}},{mData:function(a){return{id:a.id}}}],columnDefs:[{render:function(a){return toHumanReadableSize(a)},type:"file-size",width:"10%",targets:1},{render:function(a){return moment(a).format("MMM DD, YYYY hh:mm:ss A")},width:"10%",targets:2},{render:function(b){var a=file_info_url+b.id;return'<a class="btn btn-xs btn-success"  href="'+a+'" data-placement="top" data-toggle="tooltip" title="View Details"><span class="fa fa-info-circle"></span></a>'},orderable:false,bSearchable:false,width:"0",className:"text-center",targets:3},{render:function(c){var a=file_info_url+"categorization/"+c.id;var b=c.categorize?"btn btn-xs btn-info":"btn btn-xs btn-warning";var d=c.categorize?"Recategorize File":"Categorize File";return'<a class="'+b+'"  href="'+a+'" data-placement="top" data-toggle="tooltip" title="'+d+'"><span class="glyphicon glyphicon-file"></span></a>'},orderable:false,bSearchable:false,width:"0",className:"text-center",targets:4},{render:function(a){return'<button class="btn btn-danger btn-xs delete" data-placement="top" title="Delete File"><span class="glyphicon glyphicon-trash"></span></button>'},orderable:false,bSearchable:false,width:"0",className:"text-center",targets:5}],rowCallback:function(c,b,a){if(!b.categorized){$(c).addClass("warning")}},order:[[2,"asc"]]});function updateList(b){var a=ws_file_url+b;$.ajax({url:encodeURI(a),dataType:"json",type:"GET",success:function(c){file_tbl.clear();file_tbl.rows.add(c);file_tbl.draw()},error:function(c,e,d){alert("Unable to fetch dataset.")}})}$("#file_tbl tbody").on("click","tr td .delete",function(){var c=$(this).parents("tr")[0];var b=file_tbl.row(c);var a=b.data();$("#delete_file_name").text(a.name);$("#del_btn").data("id",b.index());$("#confirm_delete").modal("toggle")});$(document).on("click","#del_btn",function(c){var f=$("#del_btn").data("id");var d=file_tbl.row(f);var b=d.data();var a=ws_file_url+b.id;$.ajax({url:encodeURI(a),type:"DELETE",success:function(){d.remove().draw()}})});$(document).ready(function(){$(".nav-pills a").click(function(){updateList($(this).attr("id"))});$("body").tooltip({selector:'[data-toggle="tooltip"]'});$("#"+defaultFileFmt).click()});